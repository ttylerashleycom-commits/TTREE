<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
    import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-database.js";

    const firebaseConfig = {
        apiKey: "AIzaSyAHyIOzxwKHiEWwKFYcSvBRSAUkAgo5vWU",
        authDomain: "trickster-21842.firebaseapp.com",
        databaseURL: "https://trickster-21842-default-rtdb.firebaseio.com",
        projectId: "trickster-21842",
        storageBucket: "trickster-21842.firebasestorage.app",
        messagingSenderId: "510076861931",
        appId: "1:510076861931:web:b29ec56d0c518c1da32dae"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    const container = document.getElementById('rules-container');

    // جلب البيانات وتحديثها تلقائياً
    onValue(ref(db, 'rules'), (snapshot) => {
        if (!snapshot.exists()) {
            container.innerHTML = '<p class="text-center text-zinc-700 py-20">لا توجد قوانين حالياً</p>';
            return;
        }

        let html = "";
        snapshot.forEach((child) => {
            const r = child.val();
            html += `
                <div class="rule-item" onclick="this.classList.toggle('active')">
                    <div class="rule-header">
                        <span class="font-bold">${r.title}</span>
                        <i class="fas fa-plus transition-all"></i>
                    </div>
                    <div class="rule-content">${r.desc.replace(/\n/g, '<br>')}</div>
                </div>`;
        });
        container.innerHTML = html;
    });
</script>
