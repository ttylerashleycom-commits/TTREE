<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Trickster - Ù‚ÙŠÙ…Ù†Ø§</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { background: #0a0a0a; color: white; font-family: 'Almarai', sans-serif; }
        .star-rating { display: flex; flex-direction: row-reverse; justify-content: center; gap: 10px; }
        .star-rating input { display: none; }
        .star-rating label { font-size: 40px; color: #222; cursor: pointer; transition: 0.2s; }
        .star-rating label:hover, .star-rating label:hover ~ label,
        .star-rating input:checked ~ label { color: #f37021; }
        input[type="text"], textarea { background: #111; border: 1px solid #222; width: 100%; padding: 15px; border-radius: 15px; color: white; margin-bottom: 15px; outline: none; }
    </style>
</head>
<body class="p-6 flex items-center justify-center min-h-screen">
    <div class="max-w-md w-full bg-[#111]/50 p-8 rounded-[30px] border border-zinc-900 shadow-2xl">
        <div class="text-center mb-8">
            <h1 class="text-2xl font-black text-orange-500 mb-2">Ø±Ø£ÙŠÙƒ ÙŠÙ‡Ù…Ù†Ø§</h1>
            <p class="text-zinc-500 text-sm">ØªÙ‚ÙŠÙŠÙ…Ùƒ ÙŠØ³Ø§Ø¹Ø¯Ù†Ø§ Ø¹Ù„Ù‰ Ø§Ù„ØªØ·ÙˆÙŠØ±</p>
        </div>

        <div class="star-rating mb-8">
            <input type="radio" id="5-stars" name="rating" value="5"><label for="5-stars">â˜…</label>
            <input type="radio" id="4-stars" name="rating" value="4"><label for="4-stars">â˜…</label>
            <input type="radio" id="3-stars" name="rating" value="3"><label for="3-stars">â˜…</label>
            <input type="radio" id="2-stars" name="rating" value="2"><label for="2-stars">â˜…</label>
            <input type="radio" id="1-stars" name="rating" value="1"><label for="1-stars">â˜…</label>
        </div>

        <input type="text" id="rate-name" placeholder="Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ±ÙŠÙ…">
        <textarea id="rate-comment" placeholder="Ø£ÙƒØªØ¨ Ù…Ù„Ø§Ø­Ø¸Ø§ØªÙƒ Ù‡Ù†Ø§..." class="h-32"></textarea>
        
        <button id="submit-btn" class="w-full bg-orange-600 py-4 rounded-2xl font-black shadow-lg shadow-orange-500/10 hover:scale-105 transition">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…</button>
        <a href="index.html" class="block text-center mt-6 text-zinc-600 text-sm underline">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getDatabase, ref, push } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-database.js";
        
        const firebaseConfig = {
            apiKey: "AIzaSyAHyIOzxwKHiEWwKFYcSvBRSAUkAgo5vWU",
            authDomain: "trickster-21842.firebaseapp.com",
            databaseURL: "https://trickster-21842-default-rtdb.firebaseio.com",
            projectId: "trickster-21842",
            storageBucket: "trickster-21842.appspot.com",
            messagingSenderId: "510076861931",
            appId: "1:510076861931:web:b29ec56d0c518c1da32dae"
        };
        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        document.getElementById('submit-btn').onclick = async () => {
            const name = document.getElementById('rate-name').value;
            const comment = document.getElementById('rate-comment').value;
            const starsInput = document.querySelector('input[name="rating"]:checked');

            if(!name || !comment || !starsInput) return alert("ÙØ¶Ù„Ø§Ù‹ Ø£ÙƒÙ…Ù„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…");

            const starCount = parseInt(starsInput.value);
            const webhookUrl = "https://discord.com/api/webhooks/1476435445045788849/zBaukEXGmo6EpwyZvQNF05q2y-582EQ7zYo4C2qUt5v7AU8yjif1Dn8pbV1nhUxSzqkM";

            try {
                // 1. Ø­ÙØ¸ ÙÙŠ Firebase Ø¹Ø´Ø§Ù† ÙŠØ¸Ù‡Ø± Ø¨Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©
                await push(ref(db, 'ratings'), {
                    name,
                    comment,
                    stars: starCount,
                    date: Date.now()
                });

                // 2. Ø¥Ø±Ø³Ø§Ù„ Ø¥Ù„Ù‰ Discord
                await fetch(webhookUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        embeds: [{
                            title: "â­ ØªÙ‚ÙŠÙŠÙ… Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ù…Ù†ØµØ©",
                            color: 16763904, // Ù„ÙˆÙ† Ø°Ù‡Ø¨ÙŠ
                            fields: [
                                { name: "ğŸ‘¤ Ø§Ù„Ø¹Ø¶Ùˆ", value: name, inline: true },
                                { name: "ğŸŒŸ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…", value: "â­".repeat(starCount), inline: true },
                                { name: "ğŸ’¬ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª", value: comment }
                            ],
                            timestamp: new Date()
                        }]
                    })
                });

                alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ ØªÙ‚ÙŠÙŠÙ…Ùƒ Ø¨Ù†Ø¬Ø§Ø­ØŒ Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ!");
                window.location.href = "index.html";
            } catch (error) {
                console.error(error);
                alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.");
            }
        };
    </script>
</body>
</html>
